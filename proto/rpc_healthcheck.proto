syntax = "proto3";
package pb;

import "google/protobuf/timestamp.proto";

option go_package = "seckrit-backend/pb";

message HealthRequest {
  string clientver = 1;
  string org = 2;
  string auth_token = 3;
  string repourl = 4;
}

message HealthResponse {
  string backendver = 1;
  string latest_clientver = 2;
  bool toupdate = 3;
  string hookslist = 4; //TODO : handle case when hooks are updated
  string cliupdatepath = 5;
  string systemstatus = 6;
  google.protobuf.Timestamp created_at = 7;
}

message ClientUpdateRequest {
  string client_ver = 1;
}

message ClientUpdateResponse {
  string to_update = 1;
  string latest_clientver = 2;
  string cliupdatepath = 3;
}

service HealthService {
  rpc ClientUpdateRpc(ClientUpdateRequest) returns (ClientUpdateResponse);
  rpc DoHealthCheck(HealthRequest) returns (HealthResponse);
}